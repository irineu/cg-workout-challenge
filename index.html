<!DOCTYPE html>
<html>
  <head>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="style.css" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Lobster&family=Rubik&display=swap" rel="stylesheet">
  </head>
  <body>

    <div class="mars"></div>
    <h1 class="text-center">Mars Workout</h1>
    <div id="app"></div>

  </body>

  <script type="text/babel">
    
 
    let loadApp = (data) => { 
        function WorkoutList({activeWorkout, setActiveWorkout}){
            let entryList = data.map((entry, i) =>(
            <li key={i} onClick={() => setActiveWorkout(entry)}>
                <h3>{entry.title}</h3>
                <span className="level">{entry.levelTag}</span>
                <div className="thumb" style={{
                backgroundImage: `url(${entry.thumbnail})`
                }}></div>
                <p>
                    {entry.description}
                </p>
            </li>
            ))
            return <ul>{entryList}</ul>
        }

        function Main({activeWorkout, setActiveWorkout}) {
            return (
                <main className="main-pane">
                    <h2>Available workkouts:</h2>
                    <div>
                        {<WorkoutList activeWorkout={activeWorkout} setActiveWorkout={setActiveWorkout}/>}
                    </div>
                </main>
            );
        }

        function Workout({activeWorkout, setActiveWorkout}) {
            return (
                <main className="inner-pane">
                    <span></span>
                    <h2>{activeWorkout.title}</h2>
                    <span className="level">{activeWorkout.levelTag}</span>
                    <div className="thumb" style={{
                    backgroundImage: `url(${activeWorkout.thumbnail})`
                    }}></div>
                
                    <p>
                        {activeWorkout.description}
                    </p>
                    <span className="impact-level">Impact level: {activeWorkout.impactTag}</span>
                    <br/><br/>
                    <video autoPlay>
                        <source src={activeWorkout.media} type="video/mp4"/>
                    </video>
                    <br/>
                    <br/>
                    <br/>
                    <span className="return" onClick={() => setActiveWorkout(null)}>Return</span>
                </main>
            );
        }

        function WorkoutApp() {

            setInterval(()=>{
                let videos = document.getElementsByTagName("video");

                let playAndFullScreen = (e)=>{

                        let video = e.currentTarget;

                        video.play();
                        if (video.requestFullscreen) {
                            video.requestFullscreen();
                        } else if (video[i].mozRequestFullScreen) {
                            video.mozRequestFullScreen();
                        } else if (video[i].webkitRequestFullscreen) {
                            video.webkitRequestFullscreen();
                        }
                    };

                for(let i=0; i< videos.length; i++){
                
                    videos[i].addEventListener("click", playAndFullScreen);
                    videos[i].addEventListener("touchstart", playAndFullScreen);
                }
                // document.getElementsByTagName("video").forEach((v) =>{
                //     console.log(v)
                // })

                
            }, 500);

            const [activeWorkout, setActiveWorkout] = React.useState(null);

            return (
            <div>
                {activeWorkout ? <Workout activeWorkout={activeWorkout} setActiveWorkout={setActiveWorkout}/> : <Main activeWorkout={activeWorkout} setActiveWorkout={setActiveWorkout}/>}
            </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('app'))
        root.render(<WorkoutApp />)
    }

    // fetch('//irineuantunes.com/cg/data.json')
    // .then(response => response.json())
    // .then(data => loadApp(data));

    loadApp([
    {
      "description": "Enjoy a fun and low impact workout with Kelsey. We will engage a full body workout and get your heart rate up!",
      "thumbnail": "https://cgcdn.s3.amazonaws.com/nation/users/UID-V1421773844UID-54be8c1417ad6.png",
      "levelTag": "beginner",
      "media": "https://virtual-library.s3.amazonaws.com/Week1-KelseySage.mp4",
      "title": "Endurance by Kelsey Sage",
      "impactTag": "low",
      "id": "1",
      "trainerId": "1",
      "duration": 60
    },
    {
      "description": "Enjoy a fun and low impact workout with Missy. We will engage a full body workout and get your heart rate up!",
      "thumbnail": "https://cgcdn.s3.amazonaws.com/nation/users/UID-B1366214595UID-516ec7c321811.png",
      "levelTag": "intermediate",
      "media": "https://virtual-library.s3.amazonaws.com/Week1-MissyCheatham.mp4",
      "title": "Endurance by Missy Cheatham",
      "impactTag": "low",
      "id": "2",
      "trainerId": "2",
      "duration": 60
    },
    {
      "description": "Enjoy a fun and high energy workout with Amber. We will engage a full body workout and get your heart rate up!",
      "thumbnail": "https://cgcdn.s3.amazonaws.com/nation/users/UID-W1405610919UID-53c7eba7a992b.png",
      "levelTag": "beginner",
      "media": "https://virtual-library.s3.amazonaws.com/Week2-AmberAutrey.mp4",
      "title": "Strength and Agility by Amber Autrey",
      "impactTag": "high",
      "id": "3",
      "trainerId": "3",
      "duration": 60
    },
    {
      "description": "Enjoy a fun and low impact workout with Claire. We will engage a full body workout and get your heart rate up!",
      "thumbnail": "https://cgcdn.s3.amazonaws.com/nation/users/UID-D1489527062UID-58c86116311d9.png",
      "levelTag": "beginner",
      "media": "https://virtual-library.s3.amazonaws.com/Week2-ClaireDonahoe.mp4",
      "title": "Strength and Agility by Claire Donahoe",
      "impactTag": "low",
      "id": "4",
      "trainerId": "4",
      "duration": 60
    },
    {
      "description": "Enjoy a fun and high energy workout with Brad. We will engage a full body workout and get your heart rate up!",
      "thumbnail": "https://cgcdn.s3.amazonaws.com/nation/users/UID-Q1480349804UID-583c586ce39e9.png",
      "levelTag": "advanced",
      "media": "https://virtual-library.s3.amazonaws.com/Week3-BradJustice.mp4",
      "title": "Interval by Brad Justice",
      "impactTag": "high",
      "id": "5",
      "trainerId": "5",
      "duration": 60
    },
    {
      "description": "Enjoy a fun and low impact workout with Liz. We will engage a full body workout and get your heart rate up!",
      "thumbnail": "https://cgcdn.s3.amazonaws.com/nation/users/UID-V1356992718UID-50e210ce481d1.png",
      "levelTag": "beginner",
      "media": "https://virtual-library.s3.amazonaws.com/Week3-LizLaubenberg.mp4",
      "title": "Interval by Liz Laubenberg",
      "impactTag": "low",
      "id": "6",
      "trainerId": "6",
      "duration": 60
    },
    {
      "description": "Enjoy a fun and low impact workout with Liz. We will engage a full body workout and get your heart rate up!",
      "thumbnail": "https://virtual-library.s3.amazonaws.com/canva-photo-editor.png",
      "levelTag": "intermediate",
      "media": "https://virtual-library.s3.amazonaws.com/Week4-LizLaubenberg.mp4",
      "title": "Peak by Liz Laubenberg",
      "impactTag": "low",
      "id": "7",
      "trainerId": "6",
      "duration": 60
    },
    {
      "description": "Enjoy a fun and high energy workout with Ruth. We will engage a full body workout and get your heart rate up!",
      "thumbnail": "https://cgcdn.s3.amazonaws.com/nation/users/UID-Z1436824390UID-55a43346512eb.png",
      "levelTag": "advanced",
      "media": "https://virtual-library.s3.amazonaws.com/Week4-RuthMallory.mp4",
      "title": "Peak by Ruth Mallory",
      "impactTag": "high",
      "id": "8",
      "trainerId": "7",
      "duration": 60
    }
  ])

    
  </script>

</html>